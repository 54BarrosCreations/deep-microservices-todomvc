language: node_js
sudo: required
node_js:
  - '6.10'
  - '7.8'
cache:
  edge: true
  directories:
    - $(npm root -g)
    - node_modules
    - deep_modules
    - $(npm config get prefix)/bin
branches:
  only:
    - master
    - dev
    - stage
    - test
before_install:
  - cp bin/test/package.json .
after_success:
  - npm run coverage
after_script:
  - npm run remove-coverage
env:
  global:
    - DEEP_NO_INTERACTION=1
    - E2E_TESTING=public
    - secure: 
        MEwysS3HqSUfT/7AnpgqYpZXyFkXQSQDH0YsoA0lUO+tJyIHLrEuJuEIHEazKvD7VYbQNBYjJYf92uTxh1egakH60eC/QyrluFSqu5KFtpx/lnyfMNkl7feld+jQxO7kXKGxhjaqxmhn2Gp/42tV+FUFb7dU3kZgh0R6vCluado9Vm1tWwVjRUYVEzp2avRwolBsn5xqLVVvMakulEOKT4py5/Pmnm9iZEGWBw+0dIxdtWTQDGDCHshcdTP7QxcWWUe7B9P979M24ePSmmQC9jFLAQo7JCvj6fJW+gNK590XmJZKNmtpdG+Jo8rjhRjbUaeUzaZsw15aJoFuUsrfdxuNKtAYDZ92q2390FAF0czYBIBRwsiLcIS6P3Lsf5Tbq0WTLrEU7cTKwAmB3jEiNXPY+3OkkqT5kGmwKzEp0LgR7d/Ht/iecXSfzrP5Am4XYtOUPsRn9kig0t4Zb6iHyrAc+Zvnb3FzLMSSllayTAcXF9wHvqSeSdJ3qN2vUMEXN5KNWIkcGMiqQD6g0Jcgdl0MHOBSrgjzJQKJpLYVObP/tlsDaxUyIHgqjEQtXSnRIW4cNoOwgk9ltpzWBtT0z+DW6A/tDNcc2y7ejX7bjHSXxxWAk/jNjCAaYPINiWu+HL6UoPjnwiy7NOlJRMXoS7zR0Gmqr0cfKl1+VVIPP90=
    - secure: 
        Be2HJR+xjPUvffUAE0Us5Lgdn/K3db+1O3KIQv/pUr7uf6IxfBgR2fcUl8s4ggb5CexP6rFxYoefSmFnClOfVfkC9YLikR28VSdH6OKqULYrXQBqMgZvifYT4IHxXA+boMEAN3ijf+OmIScHBlMtGCSGGeoMy3wJQeti5TuWtCqV0ixONA0/XYitmOq/fDmNdrRQeAQqq9+6HTooTPcZNyLK139zFrdHXMn8OruZZAkuPHGAoquMrkEyEZMiODhqOQPb52dc8lP9IYvXzUHmZqMGyShWwHSZPvPYWaWE1mbmBrwoxDwqBdw3WbohP0EbUlzir7MjO4tpSI8O66gMZguhg34G3/MgwaHyJxIjR8TDc3z+MMJ+6IfMxE43jJFVIYHFwxQ7xkfJPJ7CxAnceCkbV8AVLGXUc+h/tiKHE9WSEpO11iUemOaQeQtgeJ6LSDs9OAn6xBBaRWuq79/3ltMGZCguVpW8pZh1d0+LwNQEXR4WJISdTBmFvqdOeKH9B9cWXt5Zi9aahK52z/e8ntbWxG+EIqH6HHwuCR4rQdFfe4GaFejGTcuArVCYnT3h/u5fmeAhSDFK61bQBfVc1z77q8z+bun9S7Z7PwKsVOxqrKkJLvci7DAjMq6E8FTPDl7BbsfQMs23dF5qFqHO/dvkXTUWHGxvqOOUZdq4H9A=
    - secure: 
        mHGQCUAa8CmXFmmhnNJAvnANALyZTaeq5strM2armvKSsscKKXFKEruF+tpmcckMWel7v+89w7BoSfNCpJzWVRcNsD/rrJM+LD5twyS7qso8mGnPlAtCV1PqayicwO9V/YDmf3zO6BzUuTbL3KLzh3vz1nkfnVial3WO9CGJr0WqhgmSYyn5L/TQYAyokMPe/o5QewPOTVN1m4ZtgSSeV4ECxi58lcH1suZHTFU2ueg7hiqGYh4X4upyw4iAOTtX0wMocY/XTGQojHaTBN2nZK0kDOgernhGQ2wQViLVDkMD1UDNy495Q1y8Av++oNdifHl4ZJqi11xSRgIP1KtBWn48y9UyaPJSPta+PH8DqvBahH+YOHsbeEFA9tRe3w/JbKOFD7GlNxG2KkbX7+eTUQKyYpzoLlnEHpy2QfjSlD7iBiKi/SqsMTlwIaLqV6ZgJ/HyXU+BYBf77yjGSZffE6r4aUY3Zpvwc8OtnBEiXWXAXmpJfSlLzP8cY40TKEhEDdGsDMDSyHavZuKOu6FOpJkbA4fhJw1UB67SgFdNq5sfnutF6BqzKZR9FfqGRLqZ4gLm7sXgo3jRKUD5TMdQKdJ6ywZvvbm0gP1wX2cl1mp7yXF6Er6KHIJ4hXR76PPFvXfPGeTqjvUUWsEbuz+Hp7Gczv4GQvNg1JSkWGlnbes=
    - secure: 
        JsIZPvvly+2tDWDAxo16f84ayFZK9edJaEJpq9Ca3L0dxWEX6R8ZyVdY1orgI+KeIQEAznRRDpQM7ZGt12nRW6i/bz3Zp4FXH7x2UvFZJ+xTQEYkelXIO3BQ7etU/fQAEFT1lR9HVHeepVwTWe3VAqZ2buqrxsxtfa/RG6WnmQp2S92A3YS+gcQD9Zz/Gc7PcnGTZZI8g4/YwPHJ3NxKRlnRqWVzXEKcvXD8vZMMextcZNL06R45g3hUL26ynmTO35Tgl2g3u0FNAs+p/xN0Roig0WcE5aOOPN6JFuiY6YtUDldEgdLzDcq1fgqbtHTVCFsTNCisTVU3/qMZnz9NxoQr9hawPKynFlVYSnM8nyezD92YcCdLXAX4Bei9LlU8V326na8JRt3kwM/yhz1q8wwVp8h5HVEBJ6jd37FAVdmgkqkTIXadhzpxvASDtFn2vfVjUHOWn93qqscWz0gry+ZHDLxwSDtk3+13hPHrm5LRopmrQR6XnZG1qfTEAQ6M9771ir3SrbdRXnUsg5N/KIXbz/EZ7jYgcrrS+xP2rmlTOAQnZlSBJNJ85IO8VCYpER6F9Dk/Aj+X1nK3eym1aKXk1+wEBlytoS6bHA4h9AQovFliHVOm9tpRliD1govfifNS/gKQCKtcR/ZGMJTVtWW8uMEugaAiw/Hsxrzhs5A=
    - secure: 
        o1ni6XQ2naZvik5USOdd0CBkcAVhSmYcumEol4/gX+d7Rq3/h20B5WeDEKq55mOkPRq5WLPZfdE5KoDHLvz4qNs+pmwAUNy5lvbhs2RU8DvJVzJAHSoyKCXwJr/kmACjDH0/95FyUrCtml4b7gpFRCtTfhhnUCQDtdXO64znvQqN2Yyd/igNZ6lTs6nK7GnzKYChhF1WsIs9ROLY05yGlWy87JWW2xwMtDTP4ufF1EqlHAT6taDcV+a+6iywkFA9EBo7t5+ZO9m2IfHHEvTBbePvUNMTPf8K07EHZM83+b6sjYU/ucYGzHg0E+YmAsnmy1ALjf+6KyOz+UnSm9zC0htMHH1TzS+rNK6KfYELlTIiIB2wYgKNwnrWsYk21+EkzKE+0J+7ytCtZUbcI8NbFeZ9l73tXbNT5n5ATBSY9rpG3CpaKNvXwlCO0vPVctTuk20q92aKcVvFy7/iu5UhUoEY5b/yN4f0f9fcuRr304FwifHGUiCs3kTQ7VDz5TKOSjjTptjcAq3hMMXZqoVFrkuH1IWUCUGycim/keojpgz419FatkDnroBLknWrqjvXXVIqr2ZROtKZVoq0eHXAgeDdqkomzigHKIEJDzTwXEC9TtUDQ7HhTA3P+Vk7cIp6MGuq+Xi6dW0M6jOJ/VMU5jfAJ0yX//1seSVTKWBGkOo=
    - secure: 
        f+HaFd/PrMhX0XyYQudPhOpjGWPXN/jjiV9nzMxr8U14v0ej3f2feWoz/2MW//C44bGgHtpcm83k2+GwW2FTOTt4AANb/KKhAoBiWnLei/WH7QNNm8D+MrNBluOjKAkcD67j1redfFO6buUJ7nSCcRtuYQ53n6xfs7KWORHxHlg3n7dzM+f5qMnFfdjIUbHH90eTORSrmYS6t8a2niGUxVY22JTuTCKFRx2dhD9w84LiTRvK/do6ZAVuoSzbXhcBap0Yuv84mUWydLsaJqskfmZ4z6ViYhr+cCqcmBsmc/12XljqwyPX0YonKrrzw17xw6ofCpBwUB6x+UH4iqd/vdP8F1dhEgLXpar58ZsWf9g/zflmTdnkw7KNeshTVUsHq9X5C7t43VyRPQZ5Eo6xOAsSVP/Fd9OdNne/bInUsJmIURUTEQBH6hIVyQ7F3OCXCzpOUJOyoyc6DO0tDGMxz4SToFY1bTtOhGqgR1ErruI3H7lpMVRRgrxBRhoY+E7N6Ak8Ypun/SqY9F1p6QIgpisVuUkfFUxbBOZ4Lhojk6wigZ3GKKCEQUV6MdRVBaQ7hSO1xW4AGu5s96BZzz2VrKH6MxxiNQ65b0V8ZgAYMb3fzsbHiTrgNC1Kgb4r/bpbBRsk0vhRZZ8jIau2F+dxsrMQGMcTSpvyplfWNsoK4Hg=
    - secure: 
        WnJSPywf8SklQCECuGl9avHTkYrMEvsQOG4MQkhPdYcV8kBJW99uFl1g3hStoLbEyS5VVPDLgT93UfR2m2zcRxDObk0cGyy116gL1ZQKkcJJDN8y+n3tdms/mXXdM/H1TMWgB2R1gWBz/IdtdzrMefcDO6xrrhFhgc2M34gPDyvx1CLKVsKN18YeLwA/zjolY0QjFJQ2CQBSe/TuRmS1f2Rmw1kpz5rOETnwKCwYD+0S8NdTXpRT0fLz3B1I9Ib7Rf16RnBYIm9rwU+OFIr7gqU6VCJVopLicdFXYDQiwgQ86LYaR+0KlG88KiCx+AfJJrMRgAqGEHsioFVT+3MMP0lJ6ZG6FwRsvbK1TExY8rJEupWV83wnQcG3TAbdNAFm3RmeiGotF8L+pP8odZTuz7PfpJh2w12Ef5ooekHCEqlgmx7pmkLu4mdljJEXit4siBUiuSZ2sfPektSQl8mPTPmP/Fi09tqju0chlzx3/6POzmgviS+k6sfwRaoZm0EdjXrLIzaOX8E+TOfsBtfDybm06VFTOAlE6l7xs8jSHEBcA3yArZiMqUQHA2wbSwAea05G4N/WBoK9s9nJBI4IjhF9f/aleG3jE3zUCugP3r3eAMkk2CCNnwJwij1CPmdqfNXe4+IJvmaCS0hBrA9YBxUR6KTfirtzTtX2fwq03lY=
    - secure: 
        JEydGtraTrdf3agz9MRZY5B4xwNCnfDn/0ksJg0Apo1ZWtSuDg9TNpiVyN/GppVtRIK2ykmtl+dv1ABSmwUHSyj2qOBwJ2zz4r1SMu6HHHtX7Te9r+PDENOhXrOwBvIGn0M8lm9oenU/5jUV9rHSOgymzLlAICKtwN9RtOCPog5FuslR3FWAaVd3Eual+VRQykBazPdGvMJCBrrEV/nKJtvrlPLiAeEGdTvI/xXAD60B72QRDtvSIhxymf8g1lBE+0cNxeHd1fQeG2o0h/UPkDwMLaamBNGEPtrMZbWVs36syl3VmDQrx50QIgFDF64poQhAL9BVhImM884DkjVDvlkXQ+koY/oSXp+aBgpl3BK3+/YBhvhk3LUBy1ZEl43pAvI64NJvWjsK1OGFO6Ky+ww5MOHOtvUNKWHgxSkcxRJlQjSY1MFt+fhrYiErxjkeCC30Ux486KUO8GBfvja7fZE3u27yLScwf87sX2wSU55mTB6FpmIOpEzWr3YCvaWir4OgFIm94YTBgscjuRR2Y/aHKopm6irPv2IfnvlDqfepgIsGNViF1kinqq1wi1FmN0NLz1kBRYOCyIcQN96pCvXNjWiKAK96xUUBIVVMWTXbo+0tOVPrHHVMRcefnOW4Rft9BHtnF5d9rkOuvqFSwDWIG5l1pO2bBT3C+ScaA+4=
    - secure: 
        So9Adbpw0atpeLt25W2fDKLWca50edeo/JMSiCXk5Vl6+r87stzctDqgSBaEhBcWD1pqQlEs9zPzT7qQSnr1wXL7tv9ojQLyzRSVK6oEh+NPsYK5R1akvp9JHJgRBkYXARRCa5KoZK+4A5v0SNwyNn+sOk/kAmBtx0aheObw0Gt/XWbO5oLhqpDJ1ch6sGyqKgMIwsd/oE1mq70NL+AfQ8wSsN+2PC/W+fXM5YDDR6eeXZZpLYU7q+tg/7SCGNR46VP+Y3xEq9eBkeDzBMnLXxZ1YJHtOJbdlI7rhVVJe9jD2NW/xQCIMqYKQy2gYDRrYiv96gnovIGxeFTVTatFc3vhtMxowajwoAGxiQsJy9QN15iKKY2XvIkEm5ocLp2klm6CJ+udyrf7mAZfkYn4/MyxXGahmS+fyCv3OcGvzXC4isPW2zeXyHNkZoLhniLdF5Ru50uyy0/ji5127vA9+JqM5g5KCYuGwYCF3ISD121k971Rfo+hxD2t8L8pjIezMsCVP01lVYXkfj0U+k6nLyRDQlPTu5muULZ737Q06ubMoIK++11K12hk6n49Mw3PBN3tZjwGzNWDAxnSAM9LM0m/d6HBZpYZk1V0AW4H6uFnEbg8flJOHscLb+PnLMHLxiDVfCz96FQ8JmtSB1mtnmxS9XyjnUSEhtmkFvEFMfI=
    - secure: 
        VX/V+j0pzUgeIhC6MqPxl1WZq73xU+6tbC8qx9ViMckw3vsB1u6jeA4Y2TYXgEJB4miwMXciMuhE6AZa0csgzvXUVPttsW+lu/Rz4kIICuiSNkhlYz+zn1NPu6aDg8rtM4L7aT6O6fWpEQEMJpZx3Z2r53W9+hxXI1YT3P+0Cq91gtGh1sbJfl0VKUQIuQeCXjzRTGx08DX+P06gGAqyrBqVZozc9KQc4sqGjtwkA4vEsjnFRT6ONotcY93SYa2tzwvSWCOEB42x/2BpEeLsbJwZfMFpNN7/bsPFOXkDMoXt10m3m1FWzZC0Oogf4BTHTapVVI+iAkflJY+Wfd0KN2b8Csa2E9GMDTtcT43h/ACZlUsb1pCxrSv5dUMvc/QbfCjOLEzm4nh7bmnU9tCZ/YgA9g3TFK9eY8DVTzU+duO0v2vcDNU8JXxaPbx8FCLBSzyFzpM9OeZaL2qd2Amw9fE4xF2xqK9yc5LMT0xiClCw0ZR5Xl5heRur7HDYTD0lBVgQgbXXpVw7nwEUBpXVmUmaR0dqsFNDWcCB4esiJ3y+XBIIpqO6HsUGucM6APEkje83dbrklwukC4NiU/6r1dIFjYqayJJLdr6V+0V/aie/9gU1a6cYXDgm/3Lpz82siaRE5Yw4W2PF0yNxcV6KRxjdHsW41J4kKRqp6RQnf8A=
  matrix:
    - TEST_SUITE=backend
    - TEST_SUITE=frontend
notifications:
  slack:
    secure: 
      SVPwM6RXpW2AQKevbIDW71gla023DEY19mM6EkjKHaVlC6CNI4jqaP6ywTwJfOEQ7hDxgn+tqPGOAXJSECPwnKrzMUVh724CQhPa25Z1h3Vj8GBSKgy6zbIHP6UTngWrJdGsyS7HvWl/63R1GQ6pLFXfzHmNH3fZafEsJY8h1eUWy+/FonDJMoEXwosylCBTTb7CnQ7p1qw2JKPRADI6XsUrFVqUK9SZMJ6u9qdRHW7QtURLbfG6xY5ePpaFPFR2SPaBflxzRuTJjllb0McnLse+9yMghzpU4TdoceiIYczd4i3RkemUs3HdFPcDOFuuMElstVp9Xd3zUl8hVHKAxh6bjHDhBOrcqUchzNExBdgu4n8dZS1dTIhpE/QRe19Rd+gi2No3m0PoG98Of83wDHx5541bXtjJyeK0Y1wk7WsmOR2kH5gyHNcVUcLmOVkwMC0F4rCtVOkftLhzeq2tudYiOtge2OEOBJBRItqEZxSacc4MY26Y3WZ5PbTvpCREXpdhQTpnGhLOGbkOE7CCAKCJWuzfksBUNqQskNKHnLayAUI730odaHlfpwd+XUP7AJjaoaSDQn0lcvahjjpBkvRwQrehYGbbaaXHGZSEsygiuqzDBa13JqlXkJFAKPX0gEZN5wJB3ehH8ExiURaOVNaLJhRBJqR7sMRoHM604p8=
addons:
  sauce_connect: true
